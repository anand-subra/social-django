{% extends "social/base.html" %}

{% block content %}
<div class="content members">
	<div class='main'>
		<h2>Members</h2>


		<ul class="nav nav-tabs">
			<li class="active"><a data-toggle="tab" href="#allfriends">All Friends</a></li>
			<li><a data-toggle="tab" href="#allmembers">All Members</a></li>
			<li><a data-toggle="tab" href="#suggfriends">Suggested</a></li>
			<li><a data-toggle="tab" href="#friendreqs">Requests</a></li>
			<li id="search-tab"><a data-toggle="tab" id="searchfriendstab" href="#searchfriends"><span class="glyphicon glyphicon-search"></span> <input type="text" id="search" name="search" placeholder="Search a member" /> </a></li>
		</ul>

		<div class="tab-content">

			<div id="allfriends" class="tab-pane fade in active">
				<br>
				<div class="row">
					{% for friend in allFriends %}
					<div class=" col-lg-4 col-md-6 col-sm-6">
						<div class="friend-entry">
							<h3 class="friend-name"><a href="/social/members/?view={{friend.friend2}}">{{friend.friend2}}</a> <a href="?deleteFriend={{ friend.friend2 }}"> <span class="glyphicon glyphicon-remove-circle friend-stat-glyph"></span> </a><h3>
							</div>
							<br>
						</div>
						{% endfor %}
					</div>
				</div>

			<div id="allmembers" class="tab-pane fade in">
				<br>
				<div class="row">
					{% for member in allMembers %}
					<div class=" col-lg-4 col-md-6 col-sm-6">
						<div class="friend-entry">
							<h3 class="friend-name"><a href="/social/members/?view={{friend.friend2}}">{{member.username}}</a> <a href="?sendFriendRequest={{ member.username }}"> <span class="glyphicon glyphicon-remove-circle friend-stat-glyph"></span> </a><h3>
							</div>
							<br>
						</div>
						{% endfor %}
					</div>
				</div>


				<div id="suggfriends" class="tab-pane fade in">

					<br>
					<div class="row">
						{% for suggestedFriend in suggestedFriends %}
						<div class=" col-lg-4 col-md-6 col-sm-6">
							<div class="friend-entry">
								<h3 class="friend-name"><a href="/social/members/?view={{suggestedFriend.friend2}}">{{suggestedFriend.friend2}}</a> <a href="?approveFriendRequest={{request.sender}}"> <span class="glyphicon glyphicon-thumbs-up friend-stat-glyph"></span> </a><h3>
								</div>
								<br>
							</div>
							{% endfor %}
						</div>

							</div>



							<div id="friendreqs" class="tab-pane fade">

								<br>
								<div class="row">
									<!--Pendign requests to approve-->
									Pending Requests
									<br>
									{% for request in pendingRequests %}
									<div class=" col-lg-4 col-md-6 col-sm-6">
										<div class="friend-entry">
											<h3 class="friend-name"><a href="/social/members/?view={{request.sender}}">{{request.sender}}</a> <a href="?approveFriendRequest={{request.sender}}"> <span class="glyphicon glyphicon-thumbs-up friend-stat-glyph"></span> </a><h3>
										</div>
										<br>
									</div>
									{% endfor %}
									<!--Sent Friend Requests-->
									<br>
									<br>
									<br>
									<br>
									<br>
									Sent Requests
									<br>
									{% for sent in sentRequests %}
									<div class=" col-lg-4 col-md-6 col-sm-6">
										<div class="friend-entry">
											<h3 class="friend-name"><a href="/social/members/?view={{request.recipient}}">{{sent.recipient}}</a> <a href="?approveFriendRequest={{request.sender}}"> <span class="glyphicon glyphicon-thumbs-up friend-stat-glyph"></span> </a><h3>
										</div>
										<br>
									</div>
									{% endfor %}
								</div>
								</div>
									<div id="searchfriends" class="tab-pane fade">
										<div id="search-results">
										</div>
									</div>
								</div>

								<script>
								$(function() {

									$('#search').keyup(function() {

										$.ajax({
											type: "GET",
											url: "search",
											data: {
												'search_text' : $('#search').val(),
												'csrfmiddlewaretoken' : $("input[name=csrfmiddlewaretoken]").val()
											},
											success: searchSuccess,
											dataType: 'html'
										});
									});
								});

								$(document).ready(function(){
								    $(".btn").click(function(){
								       location.reload();
								    });
								});

								function searchSuccess(data, textStatus, jqXHR)
								{
									$('#search-results').html(data)
								}
								</script>

							</div>
							{% endblock %}
